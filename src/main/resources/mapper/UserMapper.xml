<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.stonedt.spider.dao.UserDao">

    <insert id="insertUser" parameterType="com.stonedt.spider.entity.StonedtUser" useGeneratedKeys="true" keyColumn="id" keyProperty="id" >
        insert into stonedt_user (username, password, name, company,  status, job, user_power,  create_time, update_time, open_id)
        VALUES(#{username}, #{password}, #{name}, #{company}, #{status}, #{job}, #{user_power}, now(), now() , #{open_id})
    </insert>

    <select id="getByOpenId" resultType="com.stonedt.spider.entity.StonedtUser">
        select id, username,status  from stonedt_user where open_id = #{openId}
    </select>

    <select id="selectUserByOpenId" resultType="com.stonedt.spider.entity.StonedtUser">
        select id, username, password, name, company, status, job, user_power, create_time, update_time, open_id
        from stonedt_user
        where open_id = #{openid}
        order by update_time desc
        limit 1
    </select>

    <update id="updateUserStatus" parameterType="com.stonedt.spider.entity.StonedtUser" >
        update stonedt_user set status=#{status} where id=#{id}
    </update>

</mapper>